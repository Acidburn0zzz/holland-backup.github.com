

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MySQLDump Backup Plugin Configuration &mdash; Holland v1.0.6 documentation</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Holland v1.0.6 documentation" href="../index.html" />
    <link rel="up" title="Holland Config Files" href="../config.html" />
    <link rel="next" title="MySQL LVM Backup Plugin Configuration" href="mysql-lvm.html" />
    <link rel="prev" title="Holland Config Files" href="../config.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/holland_logo_64x64.png" alt="Logo"/>
          </a></p>
        <h1><a href="../index.html">Holland v1.0.6 documentation</a></h1>
        <div class="rel">
          <a href="../config.html" title="Holland Config Files"
             accesskey="P">previous</a> |
          <a href="mysql-lvm.html" title="MySQL LVM Backup Plugin Configuration"
             accesskey="N">next</a> |
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mysqldump-backup-plugin-configuration">
<span id="config-mysqldump"></span><h1>MySQLDump Backup Plugin Configuration<a class="headerlink" href="#mysqldump-backup-plugin-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="mysqldump">
<h2>[mysqldump]<a class="headerlink" href="#mysqldump" title="Permalink to this headline">¶</a></h2>
<p><strong>extra-defaults</strong> = yes | no (default: no)</p>
<blockquote>
Allow mysqldump to read global configuration files.  By default this
plugin will run mysqldump with &#8211;defaults-file=&lt;generate-config.cnf&gt; and
mysqldump will only read the options defined by holland.  If you would
prefer mysqldump to additionally read defaults from /etc/my.cnf you
can enable extra-defaults and holland will execute mysqldump with
&#8211;defaults-extra-file and holland mysqldump settings will simply
override and be in addition to the global settings.</blockquote>
<p><strong>mysql-binpath</strong> = /path/to/mysql/bin</p>
<blockquote>
Defines the location of the MySQL binary utilities. If not provided,
Holland will use whatever is in the path.</blockquote>
<p><strong>lock-method</strong> = flush-lock | lock-tables | single-transaction | auto-detect | none</p>
<blockquote>
<p>Defines which lock method to use. By default, auto-detect will be used.</p>
<ul>
<li><p class="first">flush-lock</p>
<blockquote>
<p>flush-lock will place a global lock on all tables involved in the backup
regardless of whether or not they are in the backup-set. If
file-per-database is enabled, then flush-lock will lock all tables
for every database being backed up. In other words, this option may not
make much sense when using file-per-database.</p>
</blockquote>
</li>
<li><p class="first">lock-tables</p>
<blockquote>
<p>lock-tables will lock all tables involved in the backup. If
file-per-database is enabled, then lock-tables will only lock all the
tables associated with that database.</p>
</blockquote>
</li>
<li><p class="first">single-transaction</p>
<blockquote>
<p>Forces the use of <tt class="docutils literal"><span class="pre">--single-transaction</span></tt> which enabled
semi-transparent backups of transactional tables. Forcing this
can cause inconsistencies with non-transactional tables, however.
While non-transactional tables will still lock, they will only
lock when they are actually being backed up. <strong>Use this setting
with extreme caution when backing non-transactional tables.</strong></p>
</blockquote>
</li>
<li><p class="first">auto-detect</p>
<blockquote>
<p>Let Holland decide which option to use by checking to see if
a database or backup-set only contains transactional tables. If
so, <tt class="docutils literal"><span class="pre">--single-transaction</span></tt> will be used. Otherwise,
<tt class="docutils literal"><span class="pre">--lock-tables</span></tt> will be used.</p>
</blockquote>
</li>
<li><p class="first">none</p>
<blockquote>
<p>Does absolutely no explicit locking when backing up the
databases or backup-set. This should only be used when backing
up a slave and only after the slave has been turned off
(ie, this can be used with the <strong>stop-slave</strong> option).</p>
</blockquote>
</li>
</ul>
</blockquote>
<p><strong>max-allowed-packet</strong> = size (default: 128M)</p>
<blockquote>
Specify an explicit max-allowed-packet option to pass to the mysqldump
command executed by this plugin.</blockquote>
<p><strong>dump-routines</strong> = yes | no</p>
<blockquote>
Whether or not to backup routines in the backup set directly. Routines
are stored in the &#8216;mysql&#8217; database, but it can sometimes be convenient
to include them in a backup-set directly.</blockquote>
<p><strong>dump-events</strong> = yes | no</p>
<blockquote>
<p>Whether or not to dump events explicitly. Like routines, events are
stored in the &#8216;mysql&#8217; database. Nonetheless, it can sometimes be
convenient to include them in the backup-set directly.</p>
<p><strong>Note</strong>: This feature requires MySQL 5.1 or later.</p>
</blockquote>
<p><strong>stop-slave</strong> = yes | no</p>
<blockquote>
This is useful only when running Holland on a MySQL slave. Instructs
Holland to suspend slave services on the server prior to running
the backup. Suspending the slave does not change the backups, but does
prevent the slave from spooling up relay logs. The default is not
to suspend the slave (if applicable).</blockquote>
<p><strong>bin-log-position</strong> = yes | no</p>
<blockquote>
<p>Record the binary log name and position at the time of the backup.</p>
<p>Note that if both &#8216;stop-slave&#8217; and &#8216;bin-log-position&#8217; are enabled,
Holland will grab the master binary log name and position at the time
of the backup which can be useful in using the backup to create slaves
or for point in time recovery using the master&#8217;s binary log. This
information is found within the &#8216;backup.conf&#8217; file located in the
backup-set destination directory
(/var/spool/holland/&lt;backup-set&gt;/&lt;backup&gt; by default). For example:</p>
<div class="highlight-python"><pre>[mysql:replication]
slave_master_log_pos = 4512
slave_master_log_file = 260792-mmm-agent1-bin-log.000001</pre>
</div>
</blockquote>
<p><strong>flush-logs</strong> = yes | no</p>
<blockquote>
Whether or not to run FLUSH LOGS in MySQL with the backup. When FLUSH
LOGS is actually executed depends on which if database filtering is being
used and whether or not file-per-database is enabled. Generally speaking,
it does not make sense to use flush-logs with file-per-database since the
binary logs will not be consistent with the backup.</blockquote>
<p><strong>file-per-database</strong> = yes | no</p>
<blockquote>
Whether or not to split up each database into its own file. Note that
it can be more consistent an efficient to backup all databases into
one file, however this means that restore a single database can
be difficult if multiple databases are defined in the backup set.</blockquote>
<p><strong>additional-options</strong> = &lt;mysqldump arguments&gt;</p>
<blockquote>
Can optionally specify additional options directly to <tt class="docutils literal"><span class="pre">mysqldump</span></tt> if
there is no native Holland option for it.</blockquote>
<p><strong>estimate-method</strong> = plugin | const:&lt;size&gt;</p>
<blockquote>
Change how this plugin estimates the backup size.  By default the MySQL
metadata (either information schema or SHOW TABLE STATUS) will be crawled
and the data+index size will be used as an estimate.  You can largely skip
this overhead by specifying a constant size.  Note this plugin will still
need to look at SHOW DATABASES/SHOW TABLES to perform any requested table
filtering.</blockquote>
</div>
<div class="section" id="database-and-table-filtering">
<h2>Database and Table filtering<a class="headerlink" href="#database-and-table-filtering" title="Permalink to this headline">¶</a></h2>
<p><strong>databases</strong> = &lt;glob-list&gt;</p>
<p><strong>exclude-databases</strong> = &lt;glob-list&gt;</p>
<p><strong>tables</strong> = &lt;glob-list&gt;</p>
<p><strong>exclude-tables</strong> = &lt;glob-list&gt;</p>
<p><strong>engines</strong> = &lt;glob-list&gt;</p>
<p><strong>exclude-engines</strong> = &lt;glob-list&gt;</p>
<p>The above options accepts GLOBs in comma-separated lists. Multiple
filtering options can be specified. When filtering on tables, be sure to
include both the database and table name.</p>
<p>Be careful with quotes. Normally these are not needed, but  when quotes
are necessary, be sure to only quote each filtering statement, as
opposed to putting quotes around all statements.</p>
<p>Below are a few examples of how these can be applied:</p>
<p>Default (backup everything):</p>
<div class="highlight-python"><pre>databases = *
tables = *</pre>
</div>
<p>Using database inclusion and exclusions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">databases</span> <span class="o">=</span> <span class="s">&quot;drupal*&quot;</span><span class="p">,</span> <span class="s">&quot;smf_forum&quot;</span><span class="p">,</span>
<span class="n">exclude</span><span class="o">-</span><span class="n">databases</span> <span class="o">=</span> <span class="n">drupal5</span>
</pre></div>
</div>
<p>Including Tables:</p>
<div class="highlight-python"><pre>tables = phpBB.sucks, drupal6.node*, smf_forum.*</pre>
</div>
<p>Excluding Tables:</p>
<div class="highlight-python"><pre>exclude-tables = mydb.uselesstable1, x_cart.*, *.sessions</pre>
</div>
<p>Excluding Engines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">exclude</span><span class="o">-</span><span class="n">engines</span> <span class="o">=</span> <span class="n">MyISAM</span><span class="p">,</span> <span class="n">Archive</span>
</pre></div>
</div>
</div>
<div class="section" id="compression">
<h2>[compression]<a class="headerlink" href="#compression" title="Permalink to this headline">¶</a></h2>
<p>Specify various compression settings, such as compression utility,
compression level, etc.</p>
<p><strong>method</strong> = gzip | pigz | bzip | lzop | lzma</p>
<blockquote>
Define which compression method to use. Note that <tt class="docutils literal"><span class="pre">lzop</span></tt> and
<tt class="docutils literal"><span class="pre">lzma</span></tt> may not be available on every system and may need to be compiled
/ installed.</blockquote>
<p><strong>inline</strong> = yes | no</p>
<blockquote>
Whether or not to pipe the output of mysqldump into the compression
utility. Enabling this is recommended since it usually only marginally
impacts performance, particularly when using a lower compression
level.</blockquote>
<p><strong>level</strong> = 0-9</p>
<blockquote>
Specify the compression ratio. The lower the number, the lower the
compression ratio, but the faster the backup will take. Generally,
setting the lever to 1 or 2 results in favorable compression of
textual data and is noticeably faster than the higher levels.
Setting the level to 0 effectively disables compression.</blockquote>
</div>
<div class="section" id="mysql-client">
<h2>[mysql:client]<a class="headerlink" href="#mysql-client" title="Permalink to this headline">¶</a></h2>
<p>These are optional and, if left undefined, Holland will try to login using
the standard .my.cnf conventions.</p>
<p><strong>user</strong> = &lt;user&gt;</p>
<p>The user to connect to MySQL as.</p>
<p><strong>password</strong> = &lt;password&gt;</p>
<p>The password for the MySQL user</p>
<p><strong>socket</strong> = &lt;socket&gt;</p>
<p>The socket file to connect to MySQL with.</p>
<p><strong>host</strong> = &lt;host&gt;</p>
<p>This would be used for connecting to MySQL remotely.</p>
<p><strong>port</strong> = &lt;port&gt;</p>
<p>Used if MySQL is running on a port other than 3306.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction to Holland</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Holland Command-Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Usage and Implementation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Holland Config Files</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../config.html" title="Holland Config Files"
             >previous</a> |
          <a href="mysql-lvm.html" title="MySQL LVM Backup Plugin Configuration"
             >next</a> |
          <a href="../genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="../_sources/provider_configs/mysqldump.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, Holland Core Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>